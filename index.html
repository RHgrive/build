<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dylib 逆コンパイル</title>
</head>
<body>
    <h2>dylib ファイルをアップロード</h2>
    <input type="file" id="fileInput">
    <button onclick="uploadFile()">アップロード</button>
    <p id="status"></p>

    <script>
        async function uploadFile() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput.files.length === 0) {
                alert('ファイルを選択してください');
                return;
            }

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            const response = await fetch('https://api.github.com/repos/rhgrive/dylib-decompiler/actions/workflows/decompile.yml/dispatches', {
                method: 'POST',
                headers: {
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify({
                    ref: 'main',
                    inputs: {
                        filename: fileInput.files[0].name
                    }
                })
            });

            if (response.ok) {
                document.getElementById('status').innerText = 'アップロード成功！解析中...';
            } else {
                document.getElementById('status').innerText = 'アップロード失敗';
            }
        }
    </script>
</body>
</html>
